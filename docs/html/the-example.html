<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HexBatch Core: the</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HexBatch Core
   &#160;<span id="projectnumber">pre-alpha</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">the</div>  </div>
</div><!--header-->
<div class="contents">
<p>(3) example but switch out ğ° and ğ«</p><ul>
<li>so can do a range of relationships [0,5] , [2,4] [-3,6] etc or just [0,0] for direct</li>
</ul>
<p><b>â</b> all ğ° that directly (or maybe indirectly depending on the min max) have ğ« as a value with this column , ( or vice versa depending on min max)</p><ul>
<li>order-set-by-x<ul>
<li>where x is any column in the segments. This is used usually to order a set before splicing or before a selection ends</li>
<li>ğ° is {}</li>
<li>ğ« is the asc or desc or no order</li>
<li><b>â</b> set of ordered primitives</li>
</ul>
</li>
<li>do-selection<ul>
<li>runs a top selection</li>
<li>ğ° is a single trait that is the âˆ« ğŸ</li>
<li><b>â **{}</b></li>
</ul>
</li>
<li><b> argument-list<ul>
<li>gets the traits used in the current api call</li>
<li>**â **{}</li>
</ul>
</b></li>
<li><b> get-variable-value<ul>
<li>gets the value (a primitive) from the variable given in the api call to do the selection. If this is the next page (after the initial api call), its stored in the selection-active-paging</li>
<li>ğ° the name of the variable</li>
<li>**â **the primitive</li>
</ul>
</b></li>
<li><b> json-data-from<ul>
<li>gets the json ğš« from a trait</li>
<li>ğ° is a single trait</li>
<li>**â **is the json</li>
</ul>
</b></li>
<li><b> bus-value-from<ul>
<li>gets the current value of a bus</li>
<li>ğ° is a single trait that needs to be a bus or trait used as a bus group</li>
<li>**â **is the busâ€™s single or group value (primitive)</li>
</ul>
</b></li>
<li><b> alpha-counter-from<ul>
<li>gets the (integer) alpha value from a single trait or a json array of integers from a group of traits</li>
<li>ğ° is the single trait or the {}</li>
<li>**â **is an integer or json containing the array</li>
</ul>
</b></li>
<li><b> beta-counter-from<ul>
<li>just like the alpha-counter-from</li>
</ul>
</b></li>
<li><b> location-from, area-from<ul>
<li>just like above</li>
</ul>
</b></li>
<li><b> data-operation<ul>
<li>for any primitive or set or logic operation<ul>
<li>if operation produces a boolean expression<ul>
<li>if ğ° must is trait or set, and ğ« is a primitive<ul>
<li>if the node right under ğ° is group operation on a set, or produces a json array from location,area,counter then this becomes a set filter</li>
</ul>
</li>
</ul>
</li>
<li>if set operation, then both ğ° and ğ« must be sets or trait</li>
<li>if group operation, then only ğ° should be set and ğ« is ignored</li>
<li>if logic operation, then ğ° and ğ« can be anything</li>
<li>if primitive operation, then both ğ° and ğ« must be not sets</li>
</ul>
</li>
<li>ğ° is {} ,single trait, or a primitive value</li>
<li>ğ« is {} , single trait, or a primitive value, or empty</li>
<li>**â can be set or primitive</li>
</ul>
</b></li>
</ul>
<p><b></b></p>
<h1><a class="anchor" id="autotoc_md153"></a>
Selection Actions</h1>
<p><b> actions can change the values of what is selected</b></p>
<p><b></p><ul>
<li>can map the selected values with the selected replacements, and set the selected with a 1:1 relationship (ordering both selections , both selections need to have the same number of values)<ul>
<li>maps only the page</li>
<li>the target and replace selections need to have the same page size</li>
</ul>
</li>
<li>can set all the selected with a constant primitive , or single selection<ul>
<li>only the page</li>
</ul>
</li>
<li><p class="startli">can set all the selected with a random choice from a selection</p><ul>
<li>only the page</li>
</ul>
<p class="startli">The selection action is run on each page of the selection rule that is advanced, and it only runs for that page. So after all the selection rules run, and their results are put into the cache, then selection actions are run. Each selection rule can have 0 or more actions. The actions can be limited to the top-n selections , by setting the ğ° âš‘ alpha flag</p>
</li>
</ul>
<p></b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md154"></a>
Selection Action Operators</h2>
<p><b></b></p>
<p><b></p><ul>
<li>set-replace-x<ul>
<li>where x is any column in the segments</li>
<li>replaces the values of the target and specified column with an ordered list</li>
<li>ğ° a set of ordered primitives</li>
<li>ğ« is the asc or desc</li>
<li><b>â</b> (no return)</li>
</ul>
</li>
<li>values-ordered-by-x<ul>
<li>where x is any column in the segments</li>
<li>ğ° is âˆ« ğŸ selection rule trait id</li>
<li>ğ« is the asc or desc or no order</li>
<li><b>â</b> set of ordered primitives** **</li>
</ul>
</li>
<li>json-data-from<ul>
<li>gets a single value or an array of values from json ğš« from a trait</li>
<li>ğ° is a single trait</li>
<li>ğ« is the json path</li>
<li><b>â **set of primitives</b></li>
</ul>
</li>
<li><b> value-replace-x<ul>
<li>where x is any column in the segments</li>
<li>replaces the values of the target and specified column with a single value</li>
<li>ğ° is the primitive value</li>
<li>ğ« is the asc or desc</li>
<li>**â (no return)</li>
</ul>
</b></li>
<li><b> map-x<ul>
<li>where x is any column in the segments</li>
<li>generates a json structure that takes the values of the target and puts it into a key of the generated json</li>
<li>each selection generates one json where the different maps add a key for each selection result</li>
<li>ğ« is an optional json path for getting parts of data out to the key, if using a json column</li>
<li>ğš« json on this row will have the key name</li>
<li><b>â</b> (no return)</li>
</ul>
</b></li>
<li><b> random-replace-x<ul>
<li>where x is any column in the segments</li>
<li>replaces the values of the target and specified column with random values from a list of primitives</li>
<li>ğ° a set of primitives</li>
<li><b>â</b> (no return)</li>
</ul>
</b></li>
<li><b> Call Api<ul>
<li>calls the api with a command, calls for each page of selection results</li>
<li>ğ° is the api trait to call</li>
<li>ğ« is optional child to gather the param-list which is the params to the api call</li>
<li>â–¶ the action target will be the trait that receive the results of the api call in the ğš« json , it must have an entry on the segments</li>
<li>âš‘ contextual flag tells how the api will be called<ul>
<li>once per thing in the selection, if the param ğ° is null, it will be filled in using the selection trait as the value</li>
<li>as an array of values, , if the param ğ° is null, it will be filled in as a json array of all the values in this page</li>
<li>as a single command that does not use the selection list</li>
</ul>
</li>
<li>The ğ° flag sets how many api calls to do per page</li>
<li>The ğ« flag sets how many pages to do api calls on</li>
</ul>
</b></li>
<li><b> Param-List<ul>
<li>ğ° is a child to another param list, or a param</li>
<li>ğ« is a child to another param list, or a param</li>
<li><b>â</b> a {}</li>
</ul>
</b></li>
<li><b> Param<ul>
<li>fills in a name value for the api call param list</li>
<li>ğ° is the trait to get the ğš« json, it must have an entry on the segments<ul>
<li>if ğ° is a selection then it runs that selection filling in any variables defined in this parent selection. If that selection is multi-paged, then the parent param calling it will wait to be filled before the api is called</li>
</ul>
</li>
<li>ğš« json on this row will have the name , and optionally data to be merged into this parmâ€™s value</li>
</ul>
</b></li>
</ul>
<p></b></p>
<p><b><b></b></b></p>
<h1><a class="anchor" id="autotoc_md155"></a>
Selection Paging</h1>
<p><b><b> All results for each selection run is put into a cache for quick lookup. But only one page of a selection running is found and saved each turn. So, the first turn has page 0, then the when the selection running is told to go to the next page, the page 0 is erased from the cache and page 1 stuff is put in there</b></b></p>
<p><b><b>If a selection that is running has more than one page, then a new segment is added of type selection-active-paging, which stores the variables used to call this selection, and remembers the next page to do. When the last page is done, and its actions are run (if any) then the selection-active-paging is kept around until the cache times out for that page</b></b></p>
<p><b><b>If the selection results are used to create virtual mill parts, then the selection-active-paging is created, even if there is only one page, and the virtual mill parts refer to that to get the values</b></b></p>
<p><b><b>The selection can limit how many actions is done by the ğŸ›ˆ ğ° and ğŸ›ˆ ğ« counters, which limit the actions per page, and pages of actions</b></b></p>
<p><b><b></b></b></p>
<h2><a class="anchor" id="autotoc_md156"></a>
Selection Page Cache (table)</h2>
<p><b><b></b></b></p>
<p><b><b></p><ul>
<li>âˆ« / selection trait<ul>
<li><b>all caches link to the selection</b></li>
</ul>
</li>
<li>/ selection-active-paging trait<ul>
<li><b>if there is more than one page in all the results, then the cache will remember the active-paging segment</b></li>
</ul>
</li>
<li>/ trait id<ul>
<li><b>the traits for each selection page are listed in the order returned</b></li>
</ul>
</li>
<li>page number<ul>
<li><b>n &gt;= 0</b></li>
</ul>
</li>
<li>turn this was cached<ul>
<li><b>used to see how old this is</b></li>
</ul>
</li>
</ul>
<p></b></b></p>
<p><b><b></b></b></p>
<h1><a class="anchor" id="autotoc_md157"></a>
Selection data storage</h1>
<p><b><b> In storage, Selection is divided into the trigger âˆ« ğŸ and action âˆ« â–¶ parts</b></b></p>
<p><b><b></p><ul>
<li>/ ğŸ­ mill owner<ul>
<li>always null</li>
</ul>
</li>
<li>/ ğŸ†” the id-trait<ul>
<li>the unique trait generated for the âˆ« â–¶ selection actions and âˆ« ğŸ selection rules</li>
<li>âˆ« â–¶ selection actions are trait type selection-action</li>
<li>âˆ« ğŸ selection rules are trait type selection-rule</li>
</ul>
</li>
<li>/ ğŸŒ world trait<ul>
<li>âˆ« ğŸ selection rules, without children, they need to belong to a world</li>
</ul>
</li>
<li>/ parent trait<ul>
<li>âˆ« â–¶ selection actions, this connects them with the âˆ« ğŸ selection rule</li>
<li>selection-active-paging, this connects them with the âˆ« ğŸ selection rule</li>
</ul>
</li>
<li>/ ğ° the alpha trait<ul>
<li>âˆ« ğŸ selection rules, this is the first operand trait</li>
<li>âˆ« â–¶ selection actions, this is the first operand trait</li>
</ul>
</li>
<li>/ ğ« the beta trait<ul>
<li>âˆ« ğŸ selection rules, this is the second operand trait</li>
<li>âˆ« â–¶ selection actions, this is the second operand trait</li>
</ul>
</li>
<li>/ â— the target trait<ul>
<li>âˆ« â–¶ for selection actions, this is trait that receive the results of the api call in the ğš« json , it must have an entry on the segments</li>
</ul>
</li>
<li>âš‘ operational flag<ul>
<li>âˆ« ğŸ selection rules, this is the operator</li>
<li>âˆ« â–¶ selection actions, this is the operator</li>
</ul>
</li>
<li>âš‘ contextual flag<ul>
<li>âˆ« â–¶ selection actions, when it calls the api, to tell how to use the selection results in that call</li>
</ul>
</li>
<li>ğš« json data<ul>
<li>âˆ« ğŸ selection rules, when they use literal data</li>
<li>âˆ« â–¶ selection actions, when it uses literal data for args to its operations<ul>
<li>will always be numbers or strings, no geometry needed</li>
</ul>
</li>
<li>selection-active-paging, stores the variables (all of them in one json)</li>
</ul>
</li>
<li>ğŸ’  multipolygon for associating area<ul>
<li>âˆ« ğŸ selection rules, when the ğš« data has geojson area</li>
</ul>
</li>
<li>ğŸ“ location for a place in the world, or other<ul>
<li>âˆ« ğŸ selection rules, when the ğš« data has geojson location</li>
</ul>
</li>
<li>ğŸ›ˆ ğ° counter<ul>
<li>âˆ« ğŸ selection rules, the size of the page</li>
<li>selection-active-paging, the current page</li>
<li>âˆ« â–¶ selection actions, tells how many actions to do per page</li>
</ul>
</li>
<li>ğŸ›ˆ ğ« counter<ul>
<li>selection-active-paging, turn this page was created on</li>
<li>âˆ« â–¶ selection actions, tells how many pages to do actions on</li>
</ul>
</li>
</ul>
<p></b></b></p>
<p><b><b></p><div class="fragment"></div><!-- fragment --><p> </b></b></p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
