<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HexBatch Core: âˆ« Selections</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HexBatch Core
   &#160;<span id="projectnumber">pre-alpha</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">âˆ« Selections </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md145"></a>
Introduction</h1>
<p>Selections are always identified by their own trait and are stored in the ğŸŒˆ segment data.</p>
<p>Selection rules are stored similarly to âš™ ğŸ logic triggers, so it's possible to build up complex rules. Selection are run on api command, although some of these commands are inbuilt and part of other api logic</p>
<p>Selections always return sets of traits, but can return potentially a huge number, so paging is built into this. With selections, you can get any group of traits using any set of rules or relationships. Selections can be nested, combined and be any complexity</p>
<p>Selections also allow for group calls to the api, to change a series of things at once, and to do mass updates. For example, if one needs to change the permission rules for a large set of things, or update millions of pieces of data at once, or to increment the counters for some data associated with â€¦ basically can do any updates. If you need to do large updates, set the amount to page to be very high. Rate limits will not allow large pages to be executed unless allowed</p>
<h2><a class="anchor" id="autotoc_md146"></a>
Variable Segments</h2>
<p>For ğŸŒˆ segments that use the ğ° , ğ« and ğ® â— traits, if these point to a segment-active-paging trait id, then the value of these is resolved to be a random pick of the cached results</p>
<h1><a class="anchor" id="autotoc_md147"></a>
Selection Rules</h1>
<h2><a class="anchor" id="autotoc_md148"></a>
Parts of a Selection Rule</h2>
<ul>
<li>A selection rule has a unique trait and no mill owner</li>
<li>There is always an operator and zero to two operands</li>
<li>The parent can call up to two children (a binary tree), and the children are walked in-order, then this is how grouping (parentheses are used)</li>
<li>Top selection rules can be found because they have nothing calling them from the operand slots, except for the operation of do-selection</li>
<li>Top selection rules always return sets of traits {}, which can be an empty set</li>
<li>While some operators can give a value without an operand, there are always one or two operands if needed.</li>
<li>when calling a child trait as an operand, the child trait will return either a json value, a number, a string or a set of selected traits</li>
<li>no more than two children , or operands , can be called. The operands are stored in the ğ° and ğ« traits for the segment. The operator is stored in the âš‘ operational flag</li>
</ul>
<h2><a class="anchor" id="autotoc_md149"></a>
Paging in a Selection Rule</h2>
<p>There can be several calls to the same selection per turn, using different contexts. These contexts are dealt with by putting the differences in variables , which are filled in for the selection. Selection rules can have variables in them that are filled when the selection runs. This enables different targets, in a shell, for example, to use the same selection but get different results. The variable values are filled in with the selection-active-paging data</p>
<p>When the selection runs for the first time, its results are put into the selection-cache. If there is more than one page, a segment type called selection-active-paging is created, which remembers the variables and current page of the selection, and will run the next page on command</p>
<h2><a class="anchor" id="autotoc_md150"></a>
Selection Rule Operators</h2>
<h3><a class="anchor" id="autotoc_md151"></a>
Simple Operators</h3>
<p><em>binary operators</em></p>
<ul>
<li><em>math, logic , comparison, json path, bit operators,group operator (max, min),geometry operators</em></li>
</ul>
<p><em>single operators</em></p>
<ul>
<li><em>used with first operand</em><ul>
<li>regex (is it in string),json path (is it existing),floor,ceil, round</li>
</ul>
</li>
<li>set operators<ul>
<li>union, intersection, diff (is in a but not b), symmetrical diff (is only in a, or is only in b) , is subset, is superset</li>
</ul>
</li>
<li>set selection<ul>
<li>random (get x random things from the set)</li>
<li>splice ( ğ° is the set to choose from and splice args are stored in ğš« json)<ul>
<li>optional arg starting index</li>
<li>optional arg ending index</li>
</ul>
</li>
</ul>
</li>
<li>flow<ul>
<li>if ,else can be nested</li>
<li>if no branch selected, then result is null</li>
</ul>
</li>
<li>group operators<ul>
<li>min,max,avg,std,count,sum</li>
</ul>
</li>
<li>logic operators<ul>
<li>and, or, xor<ul>
<li>an empty set is a false</li>
<li>any primitive is cast to truthfulness</li>
</ul>
</li>
<li>not<ul>
<li>single operand, can be set or primitive</li>
</ul>
</li>
</ul>
</li>
<li>primitive operators<ul>
<li>number operators<ul>
<li>trig, arithmetic</li>
<li>unary operators â†’ abs, log,ln,exp,floor</li>
</ul>
</li>
<li>string operators</li>
<li>json operators</li>
<li>geometry operators<ul>
<li>in area</li>
<li>area operations</li>
<li>location operations</li>
</ul>
</li>
<li>relational operators<ul>
<li>&lt; &gt; = etc</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md152"></a>
Operators for generating sets of traits</h3>
<ul>
<li>There is a system defined trait for the set of everything</li>
<li>if a trait chosen is a selection, then its current page of results is used</li>
<li>has-full-path<ul>
<li>Filters for traits with this path</li>
<li>ğ° is trait or {}</li>
<li>ğ« either a period delimited string, or an array of strings inside a json</li>
<li><b>â</b> all ğ° that has this full path</li>
</ul>
</li>
<li>has-part-path<ul>
<li>Filters for traits which has a path that starts with this</li>
<li>ğ° is trait or {}</li>
<li>ğ« either a period delimited string, or an array of strings inside a json</li>
<li><b>â</b> all ğ° that has a path that start with this</li>
</ul>
</li>
<li>has-guid<ul>
<li>Filters for traits with this guid</li>
<li>ğ° is trait or {}</li>
<li>ğ« string guid</li>
<li><b>â</b> all ğ° that has this guid</li>
</ul>
</li>
<li>has-name<ul>
<li>Filters for traits with this name (individual name, not part of a path)</li>
<li>ğ° is trait or {}</li>
<li>ğ« string name</li>
<li><b>â</b> all ğ° that has this name</li>
</ul>
</li>
<li>has-role<ul>
<li>Filters for traits with this role (trait role)</li>
<li>ğ° is trait or {}</li>
<li>ğ« string name</li>
<li><b>â</b> all ğ° that has this role</li>
</ul>
</li>
<li>permission-x<ul>
<li>variants are read and write (if cannot see, cannot do selection rule on)</li>
<li>ğ° is trait or {}</li>
<li>ğ« is a trait or {}</li>
<li><b>â</b> all ğ° that can be read|write by all ğ«</li>
</ul>
</li>
<li>has-flag-x<ul>
<li>variants are operational,contextual, descriptor</li>
<li>Filters for traits with a flag associated with them, each flag in the system has a different value</li>
<li>ğ° is trait or {}</li>
<li>ğ« flag value, either the name of the flag, or the number value of the flag</li>
<li><b>â</b> all ğ° that has this flag</li>
</ul>
</li>
<li>has-relationship<ul>
<li>Filters set for being in a relationship</li>
<li>ğ° is trait or {}</li>
<li>ğ« is a trait / which is the thing to be in a relationship with</li>
<li>ğš« json of the row has a object min, max<ul>
<li>siblings are 0 level relationships</li>
<li>ancestors are negative level relationships, with parent being -1</li>
<li>descendants are positive level relationships with children being 1</li>
<li>can select a range of relationships at once.</li>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
